# vim: ft=zsh

context-aliases:init

# go
alias gog="go get"
alias gogu="go get -u"
alias goi="go install"
alias gor="go run"
alias gob="go build"

# bash
alias bg="bash get"

# user
alias am=alsamixer
alias b="acpi"
alias psa="/bin/ps auxf"
alias -g sctl="sudo systemctl"
alias ssh='TERM=xterm ssh'
alias sus="sudo systemctl suspend"
alias yaourt="yaourt --noconfirm"
alias zi="sudo zpool import"
alias ze="sudo zpool export"
alias rr="rm -rf"
alias pwgen="pwgen 12 -y"
alias me="mysql uveliria-idfly-ru -e"
alias ym="./yii migrate"
alias pgrep="pgrep -f -a"
alias pkill="pkill -f"
alias ardour="ardour4"
alias task="python /usr/lib/python3.4/site-packages/t.py --task-dir ~/.tasks --list tasks"
alias t="translator"
alias kill9="kill -9"
alias i="issue"
alias mplayer="mplayer -zoom"
alias rto='rtorrent "$(/usr/bin/ls --color=never -t ~/Downloads/*.torrent | head -n1)"'
alias sw="sudo wifi-menu"
alias ag="ag --hidden"
alias ipa="ip a"
alias sp="sudo pon"
alias spf="sudo poff"
alias pb="pkgbuilds"
alias e="execute-on-hosts"
alias sz="source ~/.zshrc"

# pacman
alias ps="sudo pacman -Sy --noconfirm"
alias pss="sudo pacman -S -s"
alias pqs="sudo pacman -Qs"
alias pq="sudo pacman -Q"
alias pr="sudo pacman -R"

# pkgfile
alias pks="pkgfile -s"

# android tools
alias alc="adb logcat"
alias ad="adb devices"

# |
alias -g C="| cut"
alias -g G="| grep"
alias -g L="| less"
alias -g H="| head"
alias -g T="| tail"
alias -g X="| xargs"
alias -g S="| sort"
alias -g U="| uniq"
alias -g W="| wc"

# git
alias gi="git init"
alias gc="git clone"

# dotfiles editing
alias v="vim ~/.vimrc"
alias z="vim ~/.zshrc"
alias za="vim ~/.zaliases"
alias vs="vim .vim/plugins/snippets/go.snippets"

# zsh controls
alias h="bindkey L"
bindkey "^U" undo
bindkey "^T" prepend-sudo

# docker
alias d="docker"
alias dps="docker ps"
alias dpsa="docker ps -a"
alias dr="docker run -i -t"
alias de="docker exec -i -t"
alias dl="docker logs"
alias dlf="docker logs --follow"
alias da="docker attach --no-stdin"
alias drm="docker rm"
alias dst="docker stop"
alias dbld="docker build -t"

# bitbucket
alias bpr="bitbucket pull-request"

# fastcd
alias vicd="fastcd ~/.vim/plugins/ 1"
alias gocd="fastcd $GOPATH/src/ 3"

# 20.12.L -> ssh 192.168.20.12
# 20.12.P -> ssh 172.16.20.12
# t1.e    -> ssh ngs.ru.t1
# s.s     -> ssh s.s
# blah.ru -> ssh blah.ru
# node.p  -> ssh node.in.ngs.ru
# node.x  -> (resolve via search domain setting) ssh node
alias -s L='ssh-helper 192.168. .L ""'
alias -s P='ssh-helper 172.16. .P ""'
alias -s e='ssh-helper ngs.ru. .e ""'
alias -s s='ssh-helper "" .s .s'
alias -s ru='ssh-helper "" .ru .ru'
alias -s p='ssh-helper "" .p .in.ngs.ru'
alias -s x='ssh-helper "" .x ""'
function ssh-helper() {
    local prefix="$1"
    local host="$4"
    local remove_suffix="$2"
    local suffix="$3"
    shift 4

    ssh-urxvt -t $prefix"${host%%$remove_suffix}"$suffix "${@}"
}

autoload is_inside_git_repo
context-aliases:match is_inside_git_repo
    alias s="git status -s"
    alias d="git diff"
    alias a="git add"
    alias aa="git add . -u"
    alias dc="git diff --cached"
    alias c="git commit -m"
    alias cmi="git commit -m \"initial commit\""
    alias ca="git commit --amend"
    alias sh="git show"
    alias l="git log --graph --decorate --oneline --all"
    alias p="git push"
    alias po="git push origin"
    alias pom="git push origin master"
    alias pomf="git push origin master --force"
    alias plo="git pull --rebase origin"
    alias plom="git pull --rebase origin master"
    alias pl="git pull"
    alias plos="git stash && git pull --rebase origin && git stash pop"
    alias plr="git pull --rebase"
    alias grm="git rm"
    alias rs="git reset"
    alias rsh="git reset --hard"
    alias st="git stash"
    alias stp="git stash pop"
    alias std="git stash drop"
    alias r="git remote"
    alias rb="git rebase"
    alias rbc="git rebase --continue"
    alias rbo="git rebase origin"
    alias rbon="git rebase --onto"
    alias bl="git blame"
    alias rom="git rebase origin/master"
    alias rod="git rebase origin/development"
    alias co="git checkout"
    alias com="git checkout master"
    alias rso="git remote show origin"
    alias m="git submodule"
    alias ms="git submodule sync"
    alias mi="git submodule init"
    alias mu="git submodule update"
    alias br="git branch"
    alias f="git fetch"
